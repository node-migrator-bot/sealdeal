#! /usr/bin/env coffee

fs       = require 'fs'
path     = require 'path'
sealdeal = require '../lib/sealdeal'
server   = require '../lib/server'

config   = JSON.parse fs.readFileSync('config.json')

commands =
  init: ->
    unless process.argv.length >= 4
      console.log('Usage: sealdeal init NAME')
      return

    filePath = process.argv[3]
    fs.mkdir(filePath) unless path.existsSync filePath
    sealdeal.copyTree path.join(__dirname, 'site_templates/default'), filePath
  when 'server' then server.run config
  when 'build'  then sealdeal.build config
